{% extends 'base.html' %}
{% block container_class %}container wide-container{% endblock %}

{% block content %}
<h2>üìÅ –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</h2>

<form method="POST" class="category-form">
    {{ form.hidden_tag() }}
    <p>
        {{ form.name.label }}<br>
        {{ form.name(size=32) }}
    </p>
    <p>{{ form.submit(class="small-btn") }}</p>
</form>

<hr>

<table>
    <thead>
        <tr>
            <th>–ù–∞–∑–≤–∞</th>
            <th>–ö-—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π</th>
            <th>–°—É–º–∞</th>
            <th>–î—ñ—ó</th>
        </tr>
    </thead>
    <tbody>
        {% for c in categories %}
        <tr>
            <td>{{ c.name }}</td>
            <td>{{ c.transaction_count }}</td>
            <td>{{ "%.2f"|format(c.total_amount or 0) }} –≥—Ä–Ω</td>
            <td class="action-cell">
                <a href="{{ url_for('categories.edit', id=c.id) }}" class="small-btn">‚úèÔ∏è</a>
                {% if c.transaction_count == 0 %}
                    <a href="{{ url_for('categories.delete', cat_id=c.id) }}" class="small-btn red">üóëÔ∏è</a>
                {% endif %}
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="4" style="text-align:center;">–ù–µ–º–∞—î –∫–∞—Ç–µ–≥–æ—Ä—ñ–π</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}