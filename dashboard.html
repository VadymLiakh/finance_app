{% block container_class %}{% endblock %}
{% extends 'base.html' %}
{% block title %}–ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞{% endblock %}

{% block content %}
<div class="admin-panel">
    <h1>–ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>

    <p class="welcome">üëã <strong>–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ, {{ current_user.username }}!</strong></p>
    <p>–ù–∏–∂—á–µ –≤–∏ –º–æ–∂–µ—Ç–µ –∫–µ—Ä—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏:</p>

    <div class="admin-table">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–Ü–º'—è</th>
                    <th>Email</th>
                    <th>–†–æ–ª—å</th>
                    <th>–î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó</th>
                    <th>–î—ñ—ó</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.username }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.role }}</td>
                    <td>{{ user.created_at.strftime('%Y-%m-%d') }}</td>
                    <td>
                        {% if user.email != 'financeee.app@gmail.com' %}
                        <form method="POST" action="{{ url_for('admin.toggle_role', user_id=user.id) }}" style="display:inline;">
                            <button type="submit" class="btn-small">
                                {% if user.role == 'admin' %}–ó—Ä–æ–±–∏—Ç–∏ –∑–≤–∏—á–∞–π–Ω–∏–º{% else %}–ó—Ä–æ–±–∏—Ç–∏ –∞–¥–º—ñ–Ω–æ–º{% endif %}
                            </button>
                        </form>
                        <form method="POST" action="{{ url_for('admin.delete_user', user_id=user.id) }}" style="display:inline;" onsubmit="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞?');">
                            <button type="submit" class="btn-small red">–í–∏–¥–∞–ª–∏—Ç–∏</button>
                        </form>
                        {% else %}
                        <em>–ì–æ–ª–æ–≤–Ω–∏–π –∞–¥–º—ñ–Ω</em>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
